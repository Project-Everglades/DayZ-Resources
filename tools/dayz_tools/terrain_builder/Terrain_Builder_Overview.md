# Terrain Builder Project Setup Guide

This guide provides an overview of the recommended folder structure and essential files needed to set up a custom map in DayZ using Terrain Builder. It includes descriptions of each key folder and file, as well as step-by-step instructions for organizing and configuring your project.

---

## Configuration Templates

In the `config_templates` folder, you’ll find essential configuration files that serve as starting points for your custom terrain project:

- **`layers.cfg`**: Maps colors in your mask file to specific textures. Adjust this file to match the textures and colors you are using in your project.
- **`config.cpp`**: Sets up primary terrain parameters like map size, grid details, and pathfinding settings. Customize paths and settings based on your project requirements.

### How to Use

1. **Copy Files**: Copy `layers.cfg` and `config.cpp` from the `config_templates` folder into your project’s source or data folders as needed.
2. **Modify Paths and Parameters**: Update the file paths and any other parameters to fit the structure of your own project.

Refer to this documentation for additional guidance on configuring these files.

---

## Key Files in Terrain Builder Projects

When working with Terrain Builder, there are several important files that play a critical role in building and configuring your map:

1. [**`layers.cfg`**](config_templates/source/layers.cfg): Defines how different textures and materials are applied to your terrain based on the mask image.
2. [**`maplegend.png`**](config_templates/source/MapLegend.png): Visual representation of color codes used in `layers.cfg`.
3. **`mask.png`**: An image file where different colors represent various terrain types, such as grass, roads, and water.
4. **`heightmap.asc`**:
    - ASCII grid file containing elevation data for your terrain.
    - Generated by one of the following tools: `GQIS` and `L3DT`
    - This is required to be created first in order to create the 3d version of your map. Think of this as a 2D version of your map that stores the x & y (like in a math graph) coordinates. A better explaination in detail can be found in [Pennyworth Explaination](https://github.com/pennyworth12345/A3_MMSI/wiki/Mapframe-Information#cell-size)
5. **`satmap.bmp`**: High-resolution satellite image used as the base texture for your terrain.
6. [**`config.cpp`**](config_templates/world/config.cpp): Configuration file defining various terrain parameters, such as map size, grid size, and object placements.

---

## Setting Up Your Terrain Builder Project

Follow these steps to set up your Terrain Builder project for DayZ map creation:

1. **Prepare Your Heightmap**:
   - Create or obtain a `heightmap.asc` file that represents the elevation data for your terrain.
   - This file determines the physical shape and features of your landscape.

2. **Design Your Mask**:
   - Develop a `mask.png` where different colors correspond to various terrain types (e.g., green for grass, blue for water).
   - Ensure this aligns with the mappings in your `layers.cfg` and matches colors in `maplegend.png`.

3. **Configure Layers**:
   - Edit the `layers.cfg` to map colors in your mask to specific textures.
   - Ensure that the `maplegend.png` accurately represents these mappings.

4. **Set Up Configurations**:
   - Define your terrain's parameters in the `config.cpp` file, including map size, grid size, and other essential settings.

5. **Organize Your Folders**:
   - Place each file in its appropriate folder (`source`, `data`, `navmesh`, `world`) to maintain organization and ensure Terrain Builder can locate all necessary files.

6. **Run Terrain Builder**:
   - Open Terrain Builder and load your project files. Follow standard map-building practices, using the textures, elevation data, and objects specified in your folders.

---

## Project Folder Structure

Organizing your project files systematically is crucial for efficient workflow and compatibility with Terrain Builder. Here’s a suggested folder structure:

### Top-Level Folders

- **ce/**: Contains configuration files that manage game mechanics, spawn points, economy, and environmental zones.
- **data/**: Holds processed data files, including terrain layers and configuration files.
- **navmesh/**: Contains navigation mesh data and configuration specific to AI pathfinding.
- **source/**: Stores all raw source files, including heightmaps, masks, and layer configuration files.
- **world/**: Contains world-specific configuration files for the map.

---

## Folder Details



### `data/` - Processed Data Files

The **data** folder includes important files generated or used by Terrain Builder.

- **config.cpp**: The main configuration file that sets terrain parameters and map details.
- **layers/**:
  - Contains individual `M_000_000_lca.paa` and `M_000_000_lca.png` files, which are layered terrain textures for applying detailed textures to specific map segments.

### `ce/` - Central Economy & Configuration Files

The **ce** folder includes XML files defining game economy, spawn points, and environment configurations.

#### Subfolders and Files

- **db/**:
  - **`economy.xml`**: Configures the economic system for loot distribution.
  - **`events.xml`**: Defines random events across the map.
  - **`globals.xml`**: Contains global variables affecting the map.
  - **`types.xml`**: Specifies item types and spawn probabilities.

- **env/**:
  - **`brownbear_territories.xml`**: Territory zones for brown bears.
  - **`zombie_territories.xml`**: Defines zones where zombies spawn.
  - Similar files exist for other territories (e.g., `north_territories.xml` for northern zones).

#### Other Files

- **`areaflags.map`**: Defines specific area flags on the map.
- **Various `cfg*.xml` files**: Configure player spawn points, environment settings, and group clustering.

---

### `navmesh/` - Navigation Mesh

The **navmesh** folder holds data related to AI navigation across the map.

- **config.cpp**: Configuration for pathfinding and AI behavior on the map.

---

### `source/` - Source Files

The **source** folder stores raw data used by Terrain Builder to create and render the terrain.

#### Important Files and Subfolders

- **AllObjects/**:
  - **`EveryObject.txt`**: Contains a list of all objects that can be used or referenced within the map.
  - This is not required but it does help with getting an idea of what a object looks like in game since Terrain Builder does not provide a way to view each object.
  - `TODO - Add details How-To Add All objects`

- **images/**:
  - **`default_mask.png`**: The default mask image that assigns different colors to various terrain types.
  - **`heightmap.asc`**: An ASCII file defining the elevation data for the map.
  - **`satmap.bmp`**: A satellite image used as the base texture for the map.
  - **`normals.bmp`**: A normal map that defines surface detail for terrain features.

- **L3DT/**:
  - Contains files generated by the L3DT terrain generator software, including height and detail maps.
  - **Notable Files**:
    - **`CustomMap.proj`**: The main project file for L3DT.
    - **`CustomMap_DM.dmf`** and **`CustomMap_HF.hfz`**: Various height and data files related to terrain.

- **shapefiles/**:
  - Contains GIS data files used to define specific areas or shapes on the map, essential for adding geographic data to Terrain Builder.
  - `TODO - Input details how these files are created (youtube video available)`

- **TerrainBuilder/**:
  - Subfolders include **CustomMap.Cache**, **CustomMap.Layers**, **CustomMap.Shapes**, and **TemplateLibs**.
  - **Key Files**:
    - **`.v4d` and `.v4w` files**: Different layers and components used to render specific map areas.
    - **TemplateLibs**: Stores `.tml` files (e.g., `plants_bliss_building.tml`) for predefined object templates.
      - Can find more details about added 'predefined object templates' in the [Add Objects](Add_Objects.md)

- **Other Files**:
  - **`layers.cfg`**: Maps colors in the mask to specific textures for terrain.
  - **`MapLegend.png`**: A visual representation of color codes used in `layers.cfg`.
  - **`mask.png`**: A mask file where colors represent different types of terrain.
  - **`satmap.bmp`**: Satellite image texture for the map.
  - **`normalmap.bmp`**: A detailed texture used for adding depth and surface details to the terrain.

---

### `world/` - World-Specific Assets

The **world** folder typically includes additional assets or configurations that apply specifically to the world you're building.

- [**config.cpp**](config_templates/world/config.cpp): Contains map-specific configuration for rendering and gameplay.
- **`CustomMap.hpp`** and **`CustomMap.wrp`**: Files essential for defining the world’s layout and wrapping the map data in a usable format.

---

## Additional Resources

For more detailed guidance, consider exploring the following resources:

- **[Terrain Builder](https://community.bistudio.com/wiki/Terrain_Builder)**: Official Tool Page
- **[DayZ Terrain Sample](https://community.bistudio.com/wiki?title=DayZ%3ATerrain_sample)**: Provides a sample terrain project with a comprehensive folder structure and necessary files.
- **[DayZ Terrain Config Files on GitHub](https://github.com/PackJC/DayZ-Terrain-Config-Files)**: Offers default configuration files needed when creating a custom map in DayZ.

---

By understanding and organizing these files and folders, you'll establish a solid foundation for creating custom terrains in DayZ using Terrain Builder. This setup ensures your map is properly structured and configured for optimal performance and compatibility.
